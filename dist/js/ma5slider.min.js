/*!
 *   MA5-Slider
 *   v 1.1.0
 *   Copyright (c) 2016 Tomasz Kalinowski
 *   http://ma5slider.ma5.pl
 *   GitHub: https://github.com/ma-5/ma5slider
 */

$.widget("ma5.ma5slider",{options:{autoplayTime:3e3,anim:"anim-horizontal",dotsNesting:"outside-dots",dotsOrdering:"center-dots",dotsAlign:"outside-dots",dotsHover:!1},_create:function(){var e=this,t=this.element,a=t.find(".slides"),s=this._slideCount(),i=this._loopMode(),d={slides:a,slideCount:s,width:a.width(),height:a.height(),loopMode:i,currentSlide:1};if(t.length){d.loopMode!==!0&&t.addClass("first-slide");var n=t.attr("data-tempo");n=void 0===n?this.options.autoplayTime:Number(t.attr("data-tempo"));var l=t.attr("class");void 0!==l&&(~l.indexOf("anim-")||t.addClass(this.options.anim));var r=this.options.anim;t.hasClass("anim-vertical")?r="anim-vertical":t.hasClass("anim-fade")?r="anim-fade":t.hasClass("anim-horizontal")&&(r="anim-horizontal");const o=r;if(r=o,t.attr("data-initial-anim",o).addClass("dir-next"),this._createContainer(d.slides,d.width,d.height),d.slideCount<1)return d.slides.find(".slide").addClass("slide--active"),t.removeClass("inside-dots, outside-dots, left-dots, center-dots, right-dots, top-dots, bottom-dots").addClass("one-slide"),!1;d.slides.find("> .slide:nth-child("+(d.slideCount+1)+")").addClass("slide--prev js-op"),d.slides.find("> .slide:nth-child(1)").addClass("slide--active js-oa"),d.slides.find("> .slide:nth-child(2)").addClass("slide--next js-on"),1==d.slideCount&&t.addClass("safe-slides"),~l.indexOf("-navs")||t.addClass("hidden-navs"),~l.indexOf("-dots")||t.addClass("hidden-dots"),this._makeNav(),this._makeDots(d.slideCount),this._updateDotsColors(),this._updateNavsColors(),this._updateDirection(),this._updateAnim(1),this._firstLastDetect(1),jQuery().draggable&&this._ma5draggable(),setTimeout(function(){t.trigger("ma5.firstSlide")},1),t.find(".nav--next").on("touch click",function(){e.goToNext()}),t.find(".nav--prev").on("touch click",function(){e.goToPrev()}),t.find(".dot").on("touch click",function(){var t=Number($(this).attr("data-target"));e._goToSlideDotTarget(t)}),t.hasClass("autoplay")&&this._autoplay(n)}},goToSlide:function(e){var t=this.element;setTimeout(function(){t.trigger("ma5.activeSlide",[e])},1);var a=this,s=this._parm();e<1&&(e=1),e>s.slideCount&&(e=s.slideCount);var i=e;i!==s.currentSlide&&(t.removeClass("drag-prev drag-next"),s.loopMode===!1&&(s.currentSlide<i?t.removeClass("dir-prev").addClass("dir-next"):t.removeClass("dir-next").addClass("dir-prev")),t.find(".slide").removeClass("slide--prev slide--next"),t.find(".slide:nth-child("+i+")").addClass("slide--prev js-np"),t.find('> .dots .dot[data-target="'+i+'"]').addClass("active").siblings().removeClass("active"),this._firstLastDetect(i),this._updateAnim(i),setTimeout(function(){t.find(".slide--active.js-oa").addClass("transition-on").removeClass("slide--active js-oa").addClass("slide--next js-to-del"),t.find(".slide--prev.js-np").addClass("transition-on").removeClass("slide--prev js-op js-np").addClass("slide--active js-na"),1==i?t.find(".slide:nth-child("+s.slideCount+")").addClass("slide--prev js-np"):t.find(".slide:nth-child("+(i-1)+")").addClass("slide--prev js-np"),i==s.slideCount?t.find(".slide:nth-child(1)").addClass("slide--next js-nn"):t.find(".slide:nth-child("+(i+1)+")").addClass("slide--next js-nn"),a._updateDotsColors(),a._updateNavsColors(),a._updateDirection(),t.trigger("ma5.animationStart");var e=!0;t.find(".js-na").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){if(e===!0)return e=!1,i==s.slideCount?t.find(".js-to-del").removeClass("slide--next transition-on js-on"):t.find(".js-to-del").removeClass("slide--next transition-on"),t.find(".js-na").removeClass("transition-on"),1==s.currentSlide&&i==s.slideCount&&t.find(".slide:nth-child(1)").addClass("slide--next"),i==s.currentSlide-1&&t.find(".slide:nth-child("+(i+1)+")").addClass("slide--next"),s.slideAll.removeClass("js-op js-oa js-on js-np js-na js-nn js-to-del"),t.find("> .dots").removeClass("dots-disabled"),t.find(".slides > .slide--prev").addClass("js-op"),t.find(".slides > .slide--active").addClass("js-oa"),t.find(".slides > .slide--next").addClass("js-on"),t.removeClass("disabled"),t.removeClass("transition-on"),i=0,s.currentSlide=0,s.slideCount=0,jQuery().draggable&&a._ma5draggable(),t.trigger("ma5.animationEnd"),!1})},50))},goToPrev:function(){var e=this.element,t=this._parm();e.hasClass("disabled")||(counter=t.currentSlide,counter--,counter<1&&(counter=t.slideCount),e.removeClass("dir-next").addClass("dir-prev disabled"),this.goToSlide(counter))},goToNext:function(){var e=this.element,t=this._parm();if(!e.hasClass("disabled"))if(counter=t.currentSlide,counter++,counter>t.slideCount){if(t.loopMode!==!0)return!1;counter=1,e.removeClass("dir-prev").addClass("dir-next disabled"),this.goToSlide(counter)}else e.removeClass("dir-prev").addClass("dir-next disabled"),this.goToSlide(counter)},goToFirst:function(){var e=this.element;e.hasClass("disabled")||(e.removeClass("dir-next").addClass("dir-prev disabled"),this.goToSlide(1))},goToLast:function(){var e=this.element,t=this._parm();e.hasClass("disabled")||(e.removeClass("dir-prev").addClass("dir-next disabled"),this.goToSlide(t.slideCount))},_parm:function(){var e=this.element,t=e.find(".slides"),a=t.find("> *").not(".canvas"),s=t.find(".slide--active"),i=t.find(".slide--prev"),d=t.find(".slide--next");return{slider:e,slides:t,slideAll:a,slideActive:s,slidePrev:i,slideNext:d,width:t.width(),height:t.height(),slideCount:Number(t.find("> *").length)-1,loopMode:e.hasClass("loop-mode"),currentSlide:Number(e.find(".slide--active").index())+1,initialAnim:e.attr("data-initial-anim")}},_slideCount:function(){var e=this.element;return Number(e.find(".slides > *").length)-1},_loopMode:function(){var e=this.element;return e.hasClass("loop-mode")},_getCurrentSlide:function(){var e=this.element;return Number(e.find(".slide--active").index())+1},_createContainer:function(e,t,a){e.children().addClass("slide"),e.append('<canvas class="canvas" width="'+t+'" height="'+a+'"></canvas>'),e.wrap('<div class="navs-wrapper"><div class="slide-area"></div></div>')},_makeNav:function(){var e=this.element;e.hasClass("vertical-navs")||e.addClass("horizontal-navs"),e.hasClass("outside-navs")||e.addClass("inside-navs"),e.find(".navs-wrapper").append('<span class="nav--prev"></span><span class="nav--next"></span>')},_makeDots:function(){var e=this.element,t=this._parm();e.hasClass("inside-dots")||e.addClass("outside-dots"),e.hasClass("vertical-dots")||(e.addClass("horizontal-dots"),e.hasClass("left-dots")||e.hasClass("right-dots")||e.addClass("center-dots"),e.hasClass("top-dots")||e.addClass("bottom-dots")),e.hasClass("vertical-dots")&&(e.hasClass("left-dots")||e.hasClass("right-dots")||e.addClass("right-dots"),e.hasClass("outside-navs horizontal-navs")&&(e.removeClass("outside-dots"),e.addClass("inside-dots right-dots"))),e.hasClass("vertical-dots")&&(e.hasClass("top-dots")&&e.hasClass("bottom-dots")||e.addClass("middle-dots"));for(var a='<span class="dots">',s="",i=1;i<=t.slideCount;i++)1===i&&(s=" active"),a=a+'<span class="dot'+s+'" data-target="'+i+'"></span>',s="";a+="</span>",e.hasClass("top-dots")?e.prepend(a):e.append(a)},_firstLastDetect:function(e){var t=this.element,a=this._parm();$('.ma5slider__control[data-ma5slider="#'+t.attr("id")+'"]').removeClass("targeted"),$('.ma5slider__control[data-ma5slider="#'+t.attr("id")+'"][data-ma5slide='+e+"]").addClass("targeted"),a.loopMode!==!0?(t.removeClass("last-slide first-slide"),e==a.slideCount&&(t.trigger("ma5.lastSlide"),t.addClass("last-slide"),$('.ma5slider__control[data-ma5slider="#'+t.attr("id")+'"][data-ma5slide="next"]').addClass("targeted"),$('.ma5slider__control[data-ma5slider="#'+t.attr("id")+'"][data-ma5slide="last"]').addClass("targeted")),1==e&&(t.trigger("ma5.firstSlide"),t.addClass("first-slide"),$('.ma5slider__control[data-ma5slider="#'+t.attr("id")+'"][data-ma5slide="previous"]').addClass("targeted"),$('.ma5slider__control[data-ma5slider="#'+t.attr("id")+'"][data-ma5slide="first"]').addClass("targeted"))):(e==a.slideCount&&t.trigger("ma5.lastSlide"),1==e&&t.trigger("ma5.firstSlide"))},_updateAnim:function(e){var t=this.element;if(void 0!==t.find(".slide:nth-child("+e+")").attr("data-ma5-anim")){var a=t.find(".slide:nth-child("+e+")").attr("data-ma5-anim");t.removeClass("anim-horizontal anim-vertical anim-fade").addClass(a)}else t.removeClass("anim-horizontal anim-vertical anim-fade").addClass(t.attr("data-initial-anim"))},_updateDotsColors:function(){var e=this.element;if(void 0!==e.find(".slide--active").attr("data-ma5-dot")){var t=e.find(".slide--active").attr("data-ma5-dot");e.find('.dot:not(".active")').css("background-color",t)}else e.find(' .dot:not(".active")').css("background-color","");if(void 0!==e.find(" .slide--active").attr("data-ma5-dot-active")){var a="background-color:"+e.find(".slide--active").attr("data-ma5-dot-active");e.find(".dot.active").attr("style",a)}else e.find(".dot.active").css("background-color","")},_updateNavsColors:function(){var e=this.element;if(void 0!==e.find(".slide--active").attr("data-ma5-nav")){var t=e.find(".slide--active").attr("data-ma5-nav");e.find(".nav--prev, .nav--next").css("color",t)}else e.find(".nav--prev, .nav--next").css("color","")},_updateDirection:function(){var e=this.element;if(void 0!==e.find(".slide--active").attr("data-ma5-nav-prev-dir")){var t=e.find(".slide--active").attr("data-ma5-nav-prev-dir");e.find(".nav--prev").addClass(t)}else e.find(".nav--prev").removeClass("nav__top nav__bottom");if(void 0!==e.find(".slide--active").attr("data-ma5-nav-next-dir")){var a=e.find(".slide--active").attr("data-ma5-nav-next-dir");e.find(".nav--next").addClass(a)}else e.find(".nav--next").removeClass("nav__top nav__bottom")},_autoplay:function(e){var t=this.element,a=this,s=this._parm(),i=s.currentSlide,d=setInterval(function(){i++,i>s.slideCount&&(i=1),a.goToSlide(i)},e);t.on("touch click",function(){return clearInterval(d),!0}),s.slides.mousemove(function(){if($(this).is(".ui-draggable-dragging"))return clearInterval(d),!0})},_updateAfterPrevDrag:function(){var e=this.element,t=this._parm(),a=t.slides,s=t.currentSlide-1;e.removeClass("dir-next").addClass("dir-prev "+t.initialAnim),s>0?(e.trigger("ma5.activeSlide",[s]),e.find('> .dots .dot[data-target="'+s+'"]').addClass("active").siblings().removeClass("active")):(e.trigger("ma5.activeSlide",[t.slideCount]),e.find('> .dots .dot[data-target="'+t.slideCount+'"]').addClass("active").siblings().removeClass("active")),e.find(".slide").removeClass("js-op js-oa js-on"),e.find(".slides > .slide--next").removeClass("slide--next"),e.find(".slides > .slide--active").removeClass("slide--active").addClass("slide--next js-on"),e.find(".slides > .slide--prev").removeClass("slide--prev").addClass("slide--active js-oa"),1!=s?t.slidePrev.prev().addClass("slide--prev js-op"):t.slideAll.last().addClass("slide--prev js-op"),a.removeClass("dragged-prev-end dragged-next-end"),this._ma5draggable(),this._firstLastDetect(s),this._updateDotsColors(),this._updateNavsColors(),this._updateDirection(),e.trigger("ma5.animationEnd")},_updateAfterNextDrag:function(){var e=this.element,t=this._parm(),a=t.slideCount-1;e.removeClass("dir-prev").addClass("dir-next "+t.initialAnim),t.currentSlide<=a?(e.trigger("ma5.activeSlide",[t.currentSlide+1]),e.find('> .dots .dot[data-target="'+(t.currentSlide+1)+'"]').addClass("active").siblings().removeClass("active")):(e.trigger("ma5.activeSlide",[1]),e.find('> .dots .dot[data-target="1"]').addClass("active").siblings().removeClass("active")),t.slideAll.removeClass("js-op js-oa js-on"),e.find(".slides > .slide--prev").removeClass("slide--prev"),e.find(".slides > .slide--active").removeClass("slide--active").addClass("slide--prev js-op"),e.find(".slides > .slide--next").removeClass("slide--next").addClass("slide--active js-oa"),t.currentSlide!=a?t.slideNext.next().addClass("slide--next js-on"):t.slideAll.first().addClass("slide--next js-on"),t.slides.removeClass("dragged-prev-end dragged-next-end"),this._ma5draggable(),this._firstLastDetect(t.currentSlide+1),this._updateDotsColors(),this._updateNavsColors(),this._updateDirection(),e.trigger("ma5.animationEnd")},_goToSlideDotTarget:function(e){var t=this.element,a=this._parm();t.find("> .dots").hasClass("dots-disabled")||(e>a.currentSlide&&t.removeClass("dir-prev").addClass("dir-next"),e<a.currentSlide&&t.removeClass("dir-next").addClass("dir-prev"),e!=a.currentSlide&&(t.find("> .dots").addClass("dots-disabled"),this.goToSlide(e)))},_ma5draggable:function(){var e=this.element;$.globalVars={originalTop:0,originalLeft:0};var t=this,a=this._parm(),s=a.slides,i=a.width,d=a.height,n={maxWidth:i,maxHeight:d,itemWidthBreakpoint:i/5,itemWidthBreakpointSub:i/5*-1,itemHeightBreakpoint:d/5,itemHeightBreakpointSub:d/5*-1,maxHeightTop:d/5,maxHeightBottom:d*-1/5,maxWidthLeft:i/5,maxWidthRight:i*-1/5};return"anim-horizontal"==a.initialAnim,s.draggable({axis:"x",revert:!0,start:function(e,t){void 0!==t.position&&($.globalVars.originalLeft=t.position.left)},drag:function(i,d){e.removeClass("dir-next dir-prev anim-fade anim-vertical").addClass("anim-horizontal");var l=d.position.left;if(d.position.left<n.maxWidthRight&&(l=n.maxWidthRight),d.position.left>n.maxWidthLeft&&(l=n.maxWidthLeft),d.position.left=l,d.position.left>0){if(a.loopMode===!1&&0===e.find(".slide--active").index());else if(e.removeClass("drag-next").addClass("drag-prev dir-prev"),d.position.left>=n.itemWidthBreakpoint)return s.draggable("option","revert",!1),e.trigger("ma5.animationStart"),s.animate({left:n.maxWidth},300,function(){s.addClass("dragged-prev-end").removeAttr("style"),t._updateAfterPrevDrag()}),!1}else if(a.loopMode===!1&&a.currentSlide==a.slideCount);else if(e.removeClass("drag-prev").addClass("drag-next dir-prev"),d.position.left<=n.itemWidthBreakpointSub)return s.draggable("option","revert",!1),e.trigger("ma5.animationStart"),s.animate({left:n.maxWidth*-1},300,function(){s.addClass("dragged-next-end").removeAttr("style"),t._updateAfterNextDrag()}),!1}}),"anim-vertical"==a.initialAnim&&s.draggable({axis:"y",revert:!0,start:function(e,t){void 0!==t.position&&($.globalVars.originalTop=t.position.top)},drag:function(i,d){e.removeClass("dir-next dir-prev anim-fade anim-horizontal").addClass("anim-vertical");var l=d.position.top;if(d.position.top>n.maxHeightTop&&(l=n.maxHeightTop),d.position.top<n.maxHeightBottom&&(l=n.maxHeightBottom),d.position.top=l,d.position.top>0){if(a.loopMode===!1&&0===e.find(".slide--active").index());else if(e.removeClass("drag-next").addClass("drag-prev dir-prev"),d.position.top>=n.itemHeightBreakpoint)return s.draggable("option","revert",!1),e.trigger("ma5.animationStart"),s.animate({top:n.maxHeight},300,function(){$(this).addClass("dragged-prev-end").removeAttr("style"),t._updateAfterPrevDrag()}),!1}else if(a.loopMode===!1&&a.currentSlide==a.slideCount);else if(e.removeClass("drag-prev").addClass("drag-next dir-prev"),d.position.top<=n.itemHeightBreakpointSub)return s.draggable("option","revert",!1),e.trigger("ma5.animationStart"),s.animate({top:n.maxHeight*-1},300,function(){s.addClass("dragged-next-end").removeAttr("style"),t._updateAfterNextDrag()}),!1}}),this}}),$(window).on("load",function(){$(".ma5slider__control").on("touch click",function(){var e=$(this).attr("data-ma5slider"),t=($(e),$(this).attr("data-ma5slide"));"next"==t?$(e).ma5slider("goToNext"):"previous"==t?$(e).ma5slider("goToPrev"):"first"==t?$(e).ma5slider("goToFirst"):"last"==t?$(e).ma5slider("goToLast"):$(e).ma5slider("goToSlide",Number(t))})});